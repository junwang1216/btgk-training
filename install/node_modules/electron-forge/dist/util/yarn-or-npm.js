'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.hasYarn = exports.yarnOrNpmSpawn = undefined;

var _crossSpawnPromise = require('cross-spawn-promise');

var _crossSpawnPromise2 = _interopRequireDefault(_crossSpawnPromise);

var _logSymbols = require('log-symbols');

var _logSymbols2 = _interopRequireDefault(_logSymbols);

var _yarnOrNpm = require('yarn-or-npm');

var _yarnOrNpm2 = _interopRequireDefault(_yarnOrNpm);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const safeYarnOrNpm = () => {
  const system = (0, _yarnOrNpm2.default)();
  switch (process.env.NODE_INSTALLER) {
    case 'yarn':
    case 'npm':
      return process.env.NODE_INSTALLER;
    default:
      if (process.env.NODE_INSTALLER) {
        console.warn(`${_logSymbols2.default.warning} Unknown NODE_INSTALLER, using detected installer ${system}`.yellow);
      }
      return system;
  }
};

exports.default = safeYarnOrNpm;
const yarnOrNpmSpawn = exports.yarnOrNpmSpawn = (...args) => (0, _crossSpawnPromise2.default)(safeYarnOrNpm(), ...args);

const hasYarn = exports.hasYarn = () => safeYarnOrNpm() === 'yarn';
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwveWFybi1vci1ucG0uanMiXSwibmFtZXMiOlsic2FmZVlhcm5Pck5wbSIsInN5c3RlbSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0lOU1RBTExFUiIsImNvbnNvbGUiLCJ3YXJuIiwid2FybmluZyIsInllbGxvdyIsInlhcm5Pck5wbVNwYXduIiwiYXJncyIsImhhc1lhcm4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLGdCQUFnQixNQUFNO0FBQzFCLFFBQU1DLFNBQVMsMEJBQWY7QUFDQSxVQUFRQyxRQUFRQyxHQUFSLENBQVlDLGNBQXBCO0FBQ0UsU0FBSyxNQUFMO0FBQ0EsU0FBSyxLQUFMO0FBQ0UsYUFBT0YsUUFBUUMsR0FBUixDQUFZQyxjQUFuQjtBQUNGO0FBQ0UsVUFBSUYsUUFBUUMsR0FBUixDQUFZQyxjQUFoQixFQUFnQztBQUM5QkMsZ0JBQVFDLElBQVIsQ0FBYyxHQUFFLHFCQUFXQyxPQUFRLHFEQUFvRE4sTUFBTyxFQUFqRixDQUFtRk8sTUFBaEc7QUFDRDtBQUNELGFBQU9QLE1BQVA7QUFSSjtBQVVELENBWkQ7O2tCQWNlRCxhO0FBRVIsTUFBTVMsMENBQWlCLENBQUMsR0FBR0MsSUFBSixLQUFhLGlDQUFhVixlQUFiLEVBQThCLEdBQUdVLElBQWpDLENBQXBDOztBQUVBLE1BQU1DLDRCQUFVLE1BQU1YLG9CQUFvQixNQUExQyIsImZpbGUiOiJ1dGlsL3lhcm4tb3ItbnBtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNwYXduUHJvbWlzZSBmcm9tICdjcm9zcy1zcGF3bi1wcm9taXNlJztcbmltcG9ydCBsb2dTeW1ib2xzIGZyb20gJ2xvZy1zeW1ib2xzJztcbmltcG9ydCB5YXJuT3JOcG0gZnJvbSAneWFybi1vci1ucG0nO1xuXG5jb25zdCBzYWZlWWFybk9yTnBtID0gKCkgPT4ge1xuICBjb25zdCBzeXN0ZW0gPSB5YXJuT3JOcG0oKTtcbiAgc3dpdGNoIChwcm9jZXNzLmVudi5OT0RFX0lOU1RBTExFUikge1xuICAgIGNhc2UgJ3lhcm4nOlxuICAgIGNhc2UgJ25wbSc6XG4gICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9JTlNUQUxMRVI7XG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0lOU1RBTExFUikge1xuICAgICAgICBjb25zb2xlLndhcm4oYCR7bG9nU3ltYm9scy53YXJuaW5nfSBVbmtub3duIE5PREVfSU5TVEFMTEVSLCB1c2luZyBkZXRlY3RlZCBpbnN0YWxsZXIgJHtzeXN0ZW19YC55ZWxsb3cpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN5c3RlbTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgc2FmZVlhcm5Pck5wbTtcblxuZXhwb3J0IGNvbnN0IHlhcm5Pck5wbVNwYXduID0gKC4uLmFyZ3MpID0+IHNwYXduUHJvbWlzZShzYWZlWWFybk9yTnBtKCksIC4uLmFyZ3MpO1xuXG5leHBvcnQgY29uc3QgaGFzWWFybiA9ICgpID0+IHNhZmVZYXJuT3JOcG0oKSA9PT0gJ3lhcm4nO1xuIl19